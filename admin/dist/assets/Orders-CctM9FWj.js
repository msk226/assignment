import{g as G,m as J,u as L,r as ee,M as oe,a as s,X as D,c as P,ar as q,aX as re,K as te,aY as ne,e as ae,aZ as se,a6 as le,p as C}from"./index-DXWxSTAO.js";import{u as ce,S as ie,o as F}from"./endpoints-RSZ8SDw3.js";import{W as de,s as ue,p as ge,B as pe}from"./index-Cc4s-58N.js";import{u as Ce,p as H,F as me,P as be}from"./Table-EmWgk09t.js";const fe=e=>{const{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:o,componentCls:r,calc:l}=e,i=l(o).sub(n).equal(),c=l(t).sub(n).equal();return{[r]:Object.assign(Object.assign({},ee(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:i,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${L(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${r}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${r}-close-icon`]:{marginInlineStart:c,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${r}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${r}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:i}}),[`${r}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},E=e=>{const{lineWidth:t,fontSizeIcon:n,calc:o}=e,r=e.fontSizeSM;return J(e,{tagFontSize:r,tagLineHeight:L(o(e.lineHeightSM).mul(r).equal()),tagIconSize:o(n).sub(o(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},N=e=>({defaultBg:new oe(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),W=G("Tag",e=>{const t=E(e);return fe(t)},N);var ye=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};const he=s.forwardRef((e,t)=>{const{prefixCls:n,style:o,className:r,checked:l,children:i,icon:c,onChange:a,onClick:u}=e,x=ye(e,["prefixCls","style","className","checked","children","icon","onChange","onClick"]),{getPrefixCls:y,tag:g}=s.useContext(D),$=v=>{a==null||a(!l),u==null||u(v)},b=y("tag",n),[p,I,h]=W(b),O=P(b,`${b}-checkable`,{[`${b}-checkable-checked`]:l},g==null?void 0:g.className,r,I,h);return p(s.createElement("span",Object.assign({},x,{ref:t,style:Object.assign(Object.assign({},o),g==null?void 0:g.style),className:O,onClick:$}),c,s.createElement("span",null,i)))}),ve=e=>re(e,(t,{textColor:n,lightBorderColor:o,lightColor:r,darkColor:l})=>({[`${e.componentCls}${e.componentCls}-${t}`]:{color:n,background:r,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:l,borderColor:l},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}})),Se=q(["Tag","preset"],e=>{const t=E(e);return ve(t)},N);function xe(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const S=(e,t,n)=>{const o=xe(n);return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${n}`],background:e[`color${o}Bg`],borderColor:e[`color${o}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},$e=q(["Tag","status"],e=>{const t=E(e);return[S(t,"success","Success"),S(t,"processing","Info"),S(t,"error","Error"),S(t,"warning","Warning")]},N);var Ie=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};const Oe=s.forwardRef((e,t)=>{const{prefixCls:n,className:o,rootClassName:r,style:l,children:i,icon:c,color:a,onClose:u,bordered:x=!0,visible:y}=e,g=Ie(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:$,direction:b,tag:p}=s.useContext(D),[I,h]=s.useState(!0),O=te(g,["closeIcon","closable"]);s.useEffect(()=>{y!==void 0&&h(y)},[y]);const v=ne(a),w=se(a),T=v||w,A=Object.assign(Object.assign({backgroundColor:a&&!T?a:void 0},p==null?void 0:p.style),l),d=$("tag",n),[R,V,X]=W(d),K=P(d,p==null?void 0:p.className,{[`${d}-${a}`]:T,[`${d}-has-color`]:a&&!T,[`${d}-hidden`]:!I,[`${d}-rtl`]:b==="rtl",[`${d}-borderless`]:!x},o,r,V,X),B=f=>{f.stopPropagation(),u==null||u(f),!f.defaultPrevented&&h(!1)},[,Q]=Ce(H(e),H(p),{closable:!1,closeIconRender:f=>{const Z=s.createElement("span",{className:`${d}-close-icon`,onClick:B},f);return ae(f,Z,m=>({onClick:k=>{var j;(j=m==null?void 0:m.onClick)===null||j===void 0||j.call(m,k),B(k)},className:P(m==null?void 0:m.className,`${d}-close-icon`)}))}}),U=typeof g.onClick=="function"||i&&i.type==="a",z=c||null,Y=z?s.createElement(s.Fragment,null,z,i&&s.createElement("span",null,i)):i,M=s.createElement("span",Object.assign({},O,{ref:t,className:K,style:A}),Y,Q,v&&s.createElement(Se,{key:"preset",prefixCls:d}),w&&s.createElement($e,{key:"status",prefixCls:d}));return R(U?s.createElement(de,{component:"Tag"},M):M)}),_=Oe;_.CheckableTag=he;const Ne=()=>{const e=le(),[t,n]=ue.useMessage(),{data:o,isLoading:r}=ce({queryKey:["orders"],queryFn:F.getOrders}),l=ge({mutationFn:F.cancelOrder,onSuccess:()=>{t.success("주문이 취소되었습니다."),e.invalidateQueries({queryKey:["orders"]})},onError:()=>t.error("주문 취소 실패")}),i=[{title:"주문 ID",dataIndex:"id",key:"id"},{title:"사용자 ID",dataIndex:"userId",key:"userId"},{title:"상품 ID",dataIndex:"productId",key:"productId"},{title:"상품명",dataIndex:"productName",key:"productName"},{title:"사용 포인트",dataIndex:"pointsUsed",key:"pointsUsed",render:c=>`${c.toLocaleString()} P`},{title:"상태",dataIndex:"status",key:"status",render:c=>{let a=c==="COMPLETED"?"#C8FF00":"#ff4d4f";const u=c==="COMPLETED"?{color:"black",fontWeight:"bold"}:{};return C.jsx(_,{color:a,style:u,children:c})}},{title:"주문일시",dataIndex:"createdAt",key:"createdAt",render:c=>new Date(c).toLocaleString()},{title:"관리",key:"action",render:(c,a)=>a.status==="COMPLETED"?C.jsx(be,{title:"주문을 취소하시겠습니까?",onConfirm:()=>l.mutate(a.id),children:C.jsx(pe,{danger:!0,size:"small",loading:l.isPending&&l.variables===a.id,children:"취소/환불"})}):C.jsx("span",{style:{color:"#ccc"},children:"-"})}];return C.jsxs("div",{children:[n,C.jsx("h2",{style:{marginBottom:16},children:"주문 내역"}),r?C.jsx(ie,{}):C.jsx(me,{dataSource:o,columns:i,rowKey:"id"})]})};export{Ne as default};
